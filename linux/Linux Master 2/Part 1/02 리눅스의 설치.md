# Chapter 02 리눅스의 설치

<br>

## 🍀 02 파티션 (Partition)

<br>

#### 파티션의 특징과 종류 

- 파티션 : 하나의 물리적 디스크를 여러 개의 논리적인 디스크로 분할하는 것

- 다중 파티션의 장점

  - 파티션마다 독립적인 파일 시스템이 운영되기 때문에 파일 점검 시간이 줄어든다 -> 부팅 속도 빠름
  - 한 파티션 파일 시스템이 손상되더라도, 다른 파티션에 영향을 주지 않는다 -> 안정성 높음
  - 필요한 파티션만 포맷 가능 -> 백업 & 업그레이드 간편

- `/proc/partitions` : 파티션의 상태 정보를 확인할 수 있는 파일 

- ##### 파티션 구분

  1. ##### 주 파티션 Primary Partition

     - 부팅이 가능한 **기본 파티션**
     - 1개 하드디스크 당 **최대 4개의 주 파티션 분할 가능**
       - *4개 이상 사용할 경우, 확장 파티션 안 여러 논리 파티션으로 분할해 데이터 저장* 

  2. ##### 확장 파티션 Extended Partition 

     - **주 파티션 내부**에 생성
     - 데이터 저장 영역을 위한 것이 아니라 논리 파티션을 생성하기 위한 역할
     - 1~4번 번호가 붙여짐

  3. ##### 논리 파티션 Logical Partition

     - 확장 파티션 안에 생성되는 파티션
     - 논리 파티션은 12개 이상 생성하지 않는 것을 권고. 5번 이후의 번호가 붙여짐 

  4. ##### 스왑 파티션 Swap Partition

     - 하드디스크의 일부를 **메모리처럼 사용하는 영역**
     - 주 파티션 or 논리 파티션에 생성
     - 프로그램 실행 시 부족한 메모리 용량을 하드디스크로 대신함
     - 리눅스 설치 시 반드시 설치해야하는 영역
     - swap 영역의 크기는 메모리의 2배로 설정하도록 권고
  
- [파티션 설명 참고 1](https://jaypan.tistory.com/6)

- [파티션 설명 참고 2](https://btyy.tistory.com/entry/LINUX-21%EC%9D%BC%EC%B0%A8-CentOS-%ED%8C%8C%ED%8B%B0%EC%85%98%EC%A3%BC-%ED%8C%8C%ED%8B%B0%EC%85%98%ED%99%95%EC%9E%A5-%ED%8C%8C%ED%8B%B0%EC%85%98-%EB%85%BC%EB%A6%AC-%ED%8C%8C%ED%8B%B0%EC%85%98-%EB%94%94%EC%8A%A4%ED%81%AC-%EA%B4%80%EB%A6%AC%ED%8C%8C%ED%8B%B0%EC%85%98-%EB%AA%85%EB%A0%B9%EC%96%B4fdisk-%ED%8C%8C%EC%9D%BC%EC%8B%9C%EC%8A%A4%ED%85%9Cmkfs)

- [하드웨어 개념 정리](https://m.blog.naver.com/PostView.nhn?blogId=bestheroz&logNo=66675774&proxyReferer=https:%2F%2Fwww.google.com%2F)

---

<br>

#### 파일 시스템

- 파일 시스템 : 운영체제가 **파일을 시스템의 디스크 파티션상에 구성하는 방식**
- **일정한 규칙**을 가지고 파일을 저장하도록 규칙방식 제시
- 파티션에 파일 시스템이 없으면, 파일 시스템 생성 후 사용 가능
- 리눅스 고유 파일 시스템 뿐만이 아닌 다양한 파일 시스템 지원

<br>

---

<br>

#### LVM (Logical Volume Manager)

<img src="https://www.redhat.com/sysadmin/sites/default/files/styles/embed_small/public/2020-03/basic-lvm-volume_0.png?itok=5pWKbDm0" style="zoom: 33%; float:left;" >

- **여러 개의 하드디스크를 합쳐** 사용하는 기술로 한 개의 파일 시스템을 사용
- 작은 용량의 하드디스크 여러 개를 -> 큰 용량의 하드디스크 한 개처럼 사용
  - 다수의 디스크를 묶어서 사용함으로써 파티션의 크기를 줄이거나 늘릴 수 있다

| 물리 볼륨 Physical Volume    | 여러 개의 물리적 하드디스크                        |
| ---------------------------- | -------------------------------------------------- |
| **볼륨 그룹 Volume Group**   | 물리 볼륨을 **합쳐 하나의 물리적인 그룹**으로 만듦 |
| **논리 볼륨 Logical Volume** | 볼륨 그룹을 나눠서 **다수의 논리 그룹으로 만듦**   |

<br>

---

<br>

#### RAID

- 복수 배열 독립 디스크 (**R**edundant **A**rray of **I**ndependent **D**isks)
- 여러 개의 물리적 디스크를 하나의 논리적 디스크로 인식하여 작동하게 하는 기술
- 여러 개의 하드디스크에 일부 중복된 데이터를 나눠서 저장하는 기술

- ##### RAID 종류

  - ##### 하드웨어 RAID

    - 하드웨어 제조업체에서 여러 개의 하드디스크를 장비로 만들어 그 자체를 공급
    - 안정적일수록 고가

  - ##### 소프트웨어 RAID

    - 고가의 하드웨어 RAID의 대안책
    - 운영체제에서 지원하는 방식
    - 저렴한 비용으로 안전한 데이터 저장 가능

- **레벨** : 데이터를 저장하는 다양한 방법들

  - *레벨에 따라 저장 장치의 신뢰성을 높이거나 전체 성능을 향상시키는 등 다양한 목적*

  |        |                                                              |                                                              |
  | ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | RAID 0 | <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/RAID_0.svg/150px-RAID_0.svg.png"> | **스트라이핑 저장 방식**<br />: 연속된 데이터를 여러 디스크에 나눠 저장<br /><br />최소 2개 이상의 하드디스크 요구<br />입출력 작업을 **모든 디스크에 동시에 진행** -> 하나의 디스크라도 고장나면 전체에 영향<br />**고장 대비 능력이 없어서 주요 데이터 저장엔 부적합** |
  | RAID 1 | <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/RAID_1.svg/150px-RAID_1.svg.png"> | **미러링 방식**<br />: 하나의 디스크에 저장하는 데이터를 **다른 디스크에 동일하게 백업** 저장<br /><br />데이터 저장 시 **두 배의 용량** 필요 <br />결합 허용을 제공하지만 공간 효율성이 떨어짐<br />**주요한 데이터를 저장**할 때 적절 |
  | RAID 2 | <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/RAID2_arch.svg/350px-RAID2_arch.svg.png"> | **스트라이핑 저장 방식**<br /><br />기록용과 데이터 복구용 디스크를 별도로 제공<br />**오류 제어 기능이 없는 디스크를 위해** 해밍 코드 사용<br />디스크의 사용 효율성 낮음<br />**모든 SCSI 디스크에 ECC(에러 검출 기능) 탑재**하고 있기 때문에 **현재는 사용되지 않는 구성**<br /> |
  | RAID 3 | <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/RAID_3.svg/300px-RAID_3.svg.png"> | **스트라이핑 저장 방식**<br /><br />오류 검출을 위해 패리티 방식 이용<br />패리티 정보를 저장하기 위해 전용 디스크를 사용<br /> -> `스트라이핑 저장용` 최소 2개 + `패리티 저장용` 최소 1개<br />데이터 복구는 패리티 저장 디스크에 기록된 정보의 XOR을 계산하여 수행<br />대형 레코드가 사용되는 단일 사용자 시스템에 적합 |
  | RAID 4 | <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ad/RAID_4.svg/300px-RAID_4.svg.png"> | RAID 3과 유사한 방식 -> `스트라이핑 저장용` 최소 2개 + `패리티 저장용` 최소 1개<br /><br />RAID 3과 차이점 <br />: 3은 Byte 단위로 데이터를 저장하는 반면, 4는 Block(섹터) 단위로 저장 |
  | RAID 5 | <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/RAID_5.svg/300px-RAID_5.svg.png"> | **스트라이핑 저장 방식**<br /><br />**디스크마다 패리티 정보**를 갖고 있어 **패리티 디스크의 병목현상을 줄이는 것이 가능**해 실무에서 주로 사용<br />디스크 섹터 단위로 저장<br />쓰기 작업이 많지 않은 **다중 사용자 시스템에 적합** |
  | RAID 6 | <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/RAID_6.svg/300px-RAID_6.svg.png"> | **RAID 5를 확장한 것**<br /><br />제 2 패리티를 두는 `dual parity`를 사용함으로써 더 나은 **무정지성**을 가짐<br />최소 4개의 드라이브 요구 |

  - [RAID 참고](https://zetastring.tistory.com/121)

<br>

#### 파티션 분할

- ##### fdisk 

  - 파티션 테이블을 관리하는 명령어

  - 리눅스의 디스크 파티션을 생성, 수정, 삭제할 수 있는 일종의 유틸리티

  - ##### fdisk 명령어

    | 명령어 | 설명                                                      |
    | ------ | --------------------------------------------------------- |
    | a      | 부팅 파티션 지정                                          |
    | l      | 파티션 종류 선택 시, 리눅스에서 지원하는 파티션 목록 확인 |
    | n      | 새로운 파티션 추가                                        |
    | t      | 파티션 종류 변경                                          |
    | w      | 파티션 정보 저장                                          |
    | p      | 파티션 정보 확인                                          |
    | q      | 작업 종료                                                 |

    







