# Chapter 03 리눅스의 기본 명령어

<br>

## 🍀 01 사용자 생성 및 계정 관리

<br>

#### 리눅스 명령어 개요

- ##### which

  - 명령어의 경로 확인
  - 명령어의 위치를 찾아주거나 별칭(alias)를 보여주는 명령어

- ##### alias

  - 자주 사용하는 명령어를 특정 문자로 입력해 두고 명령어 대신 해당 문자를 사용할 수 있게 하는 명령어

- ##### unalias

  - alias 기능을 해제

- ##### 환경 변수 PATH

  - 실행 파일들의 디렉터리 위치를 저장해 놓은 환경 변수

  - ##### 지정된 PATH값 확인

    ```
    echo $PATH
    ```

  - 기존의 PATH에 새로운 경로 추가 방법

    ```
    // 1. 명령어 PATH
    export 변수명=$변수명:변수값
    
    // 2.홈디렉토리의 .bash_profile에 PATH 추가
    * 기존 경로와 새 경로는 콜론(:)으로 구분
    ```

<br>

#### 리눅스 도움말

- ##### man

  - [man 명령어 사용법 참고](https://ihp001.tistory.com/65)
  - 리눅스에서 사용하는 **명령어들의 매뉴얼 제공**
  - **9개의 색션**으로 구분되어 해당 색션에서 해당 정보들을 확인할 수 있다

- ##### info

  - 리눅스 명령어의 사용 방법, 옵션 등을 나타냄 (man에 비해 제공되는 명령어가 한정적)
  - GNU 프로젝트에 의해 배포되는 온라인 매뉴얼로서 하이퍼텍스트 형식으로 관련 정보를 제공하는 명령어

- ##### whatis

  - 명령어에 대한 기능을 간략하게 설명
  - *완전히 키워드가 일치해야 기능 확인 가능*

- ##### manpath

  - man 명령이 참조하는 매뉴얼 페이지의 위치 경로를 검색하여 표시

- ##### whereis

  - 찾고자 하는 명령어의 실행 파일의 절대경로, 소스코드, 설정파일 및 매뉴얼 페이지를 찾아 출력하는 명령어

- ##### apropos

  - man 페이지 설명에서 지정한 키워드를 포함하고 있는 명령어
  - **whatis 데이터베이스에서 문자열을 포함한 것**을 검색
  - *whatis 데이터베이스가 만들어져 있어야 명령어 사용 가능*

<br>

#### 사용자 생성 명령어

- ##### useradd

  - 계정 생성 (=adduser)
  - 계정자의 홈 디렉토리는 `/home/계정명`
  - 생성된 계정 정보는 파일 `/etc/passwd`, `etc/shadow`, `/etc/group`에 저장

- ##### passwd

  - 생성 계정자의 패스워드 입력&변경
  - 생성된 계정자의 패스워드는 `/etx/shadow` 파일에 기록

- ##### su

  - switch user의 줄임말
  - 현재의 사용자 계정에서 로그아웃하지 않고 다른 사용자 계정으로 로그인하여 해당 사용자의 권한을 획득하는 명령어

<br>

#### 사용자 관련 파일

- ##### 파일 `/etc/default/useradd`

  - 명령어 useradd로 **사용자 계정을 추가할 때 사용되는(=새 사용자에게 default로 세팅될) 정보**를 읽어오는 파일
    - vi 편집기 또는 명령어 `useradd -D`로 정보 변경

- ##### 파일 `/etc/passwd`

  - **계정자의 정보**를 가진 파일
  - 리눅스에 **로그인**할 때 사용
  - 파일 내 필드는 콜론(:)으로 구분

- ##### 파일 `/etc/shadow`

  - 계정자의 **패스워드 정보가 암호화**되어 있는 파일
  - 암호화 패스워드, 계정의 유효 기간 등 기록

- ##### 파일 `/etc/login.defs`

  - 사용자 계정 설정과 관련된 기본값 정의
  - **새 계정을 만들 때 반드시 참조하는 파일**
  - 패스워드 유지, 만료정보, UID & GID 최소~최대 번호, 홈 디렉토리 생성 여부 등

<br>

#### 사용자 계정 관리

- ##### usermod

  - `/home` 디렉토리에 위치한 **사용자들의 정보를 변경**하는 명령어
  - 사용자의 홈 디렉토리 & 그룹 & 유효기간 등을 변경 

- ##### userdel

  - **기존 계정 정보를 삭제**하는 명령어
  - 옵션 없이 userdel을 사용하면 디렉토리 `/etc/passwd`, `/etc/shadow`, `/etc/group`에서 해당 계정의 정보가 삭제

- ##### chage

  - **패스워드 만료 정보를 변경**하는 리눅스 명령어

<br>

#### 그룹 관리

- ##### 파일 `/etc/group`

  - **사용자 그룹**에 대해 정의되어 있는 파일
  - 모든 계정은 한 개 이상의 그룹에 포함되어 있다

- ##### 파일 `/etc/gshadow`

  - 그룹의 암호를 **MD5(128비트 단방향 암호화 해시 함수)**로 하여 저장
  - 그룹의 소유주, 구성원 설정 가능

- ##### groupadd

  - **새로운 그룹 생성**

- ##### groupdel

  - **기존 그룹 삭제**. *단, 그룹 안에 소속된 계정이 있을 경우 삭제 불가*

- ##### groupmod

  - 그룹의 **설정을 변경**

<br>

#### 사용자 조회 명령어

- ##### users

  - 시스템에 **로그인한 사용자 정보**를 출력

- ##### who

  - `who am i` or `whoami`
  - **현재 시스템에 접속해 있는 사용자들을 조회**
  -  사용자 계정명, 터미널 정보, 접속 시간, 접속한 서버 정보 등 확인
  - 관리자 root와 일반 사용자 모두 사용 가능

- ##### w

  - 현재 접속 중인 사용자들의 정보 출력
  - 서버의 현재 시간 정보, 서버 부팅 후 시스템 작동 시간, 서버 접속자의 총 수, 접속자별 서버 평균 부하율, 접속자별 서버 접속 계정명, TTY명, 로그인 시간 정보 등
  - **JCPU** : TTY 필드의 장치명에서 사용되는 모든 프로세스 CPU 사용 시간
  - **PCPU** : WHAT 필드에 나타나는 프로세스명에서 사용하는 CPU 총 사용 시간

- ##### id

  -  사용자 계정의 uid, gid, group을 확인하는 명령어

- ##### groups

  - 사용자 계정이 속한 그룹 목록을 확인하는 명령어

<br>

## 🍀 02 디렉토리 및 파일

<br>

#### 디렉토리 관리 명령어

- ##### pwd

  - 현재 작업 중인 디렉토리 위치 확인

- ##### cd

  - 디렉토리 이동 시 사용
  - 절대경로 : 시작은 `/`(루트)에서부터 시작. 시작 위치와 상관없이 경로에 모든 디렉토리 표시
  - 상대경로 : 현재 작업 중인 디렉토리 기준으로 표시하는 경로

- ##### mkdir

  - 새로운 디렉토리 생성

- ##### rmdir

  - 디렉토리만 삭제. \*-> *안에 파일이 존재할 경우 삭제되지 않는다*

<br>

#### 파일 관련 명령어

- ##### ls

  - 현재 위치한 디렉토리의 파일 목록 확인

- ##### cp

  - 파일 또는 디렉토리 복사

- ##### rm

  - 파일 또는 디렉토리 삭제

- ##### mv

  - 파일 또는 디렉토리를 이동
  - 파일명 변경

- ##### touch

  - 파일의 크기가 **0바이트인 빈 파일** 생성
  - 서버 현재 시간 기준으로 파일의 (최근 사용 시간, 최근 수정 시간 등..) 타임 스템프 변경

- ##### file

  - 파일의 종류 및 파일 속성값 확인

- ##### find

  - 현재 디렉토리에서부터 하위 디렉토리까지 주어진 조건의 파일을 찾아 해당 경로 표시

- ##### locate

  - 파일의 위치 확인

<br>

#### 텍스트 파일 관련 명령어

- ##### cat

  - 파일의 내용 출력

- ##### head

  - 파일의 **앞부분**을 지정한 양만큼 출력 (용량 or 줄 수 기준)

- ##### tail

  - 파일의 **마지막 행을 기준**으로 지정한 행까지의 파일 내용 일부를 출력

- ##### more

  - 파일을 확인하는 명령어 : 화면 단위로 끊어서 출력

    \* 위 ->아래 방향으로만 출력되기에 지나간 내용을 다시 볼 수 없다
    
  
- ##### less

  - 기능적으로 more을 확장한 것. 커서를 파일의 상하좌우로 이동 가능
  - 텍스트 파일을 한 번에 한 화면씩 출력

- ##### grep

  - 파일에서 **특정한 패턴 or 정규표현식**으로 나타낸 단어를 검색

- ##### wc

  - 파일의 **라인 수, 단어 수, 알파벳 수**를 출력

- ##### sort

  - 명령어 결과나 문서 내용을 정렬해서 출력

- ##### cut

  - 파일에서 특정 필드를 구분자로 구분하고, 잘라내서 출력

- ##### split

  - 하나의 파일을 여러 개의 작은 파일로 분리
  - 파일 내용을 (라인 수 or 용량 단위)로 분할

<br>

#### 파일 비교 명령어

- ##### diff

  - 두 개의 파일을 **행 단위로 비교** 후, 다른 부분을 출력

  - 두 개의 파일명을 매개변수로 사용하여 화면에 차이점을 나열

    ```
    $ diff T1 T2
    1c1
    < This
    ---
    > That
    ```

- ##### cmp

  - 두 개의 파일을 바이트(문자) 단위로 비교하여 출력

- ##### comm

  - 두 개의 파일을 줄 단위로 비교하여 지정 파일에만(파일1에만, 파일 1에만, 두개 다 가진) 있는 내용을 제외하고 내용 출력

<br>

#### 리다이렉션과 정규 표현식

- ##### 리다이렉션 redirection

  - 표준 입력과 표준 출력의 방향을 재지정하는 것
  - 표준 입력/출력/에러가 화면이 아닌 **파일로 대체** (모니터 출력 대신 -> 파일에 입력)
    - 표준 입력 장치 : 키보드
    - 표준 출력 장치 : 모니터
    - 표준 에러 장치 : 모니터

- ##### 파이프 Pipe

  - 둘 이상의 **명령을 함께 묶어** 실행
  - 앞 명령의 실행 결과를 받아 뒷 명령의 입력으로 전환 -> 명령어 사이를  `|`로 연결
  - 더 이상 처리할 명령어가 없으면 표준 출력 장치인 화면으로 출력

- ##### 정규 표현식 Regular expression

  - [정규 표현식 자세히 보기](https://www.nextree.co.kr/p4327/)

<br>

## 🍀 03 기타 명령어

<br>