# Network Service



> ###### index
>
> 1. Web basic
> 2. Protocol









# 1. Web basic 



### hyper text 개념 

 웹페이지 내에서 텍스트를 <u>순차적으로 접근하지 않고</u> **하이퍼 링크**를 통해 다른 웹에 대한 참조 정보가 들어있어 다른 웹페이지로 바로 이동이 가능



### URL(Uniform Resource Locator)

Web에 존재하는 문서나 각종 파일의 위치를 표시

##### URL의 구성

- 스킴(scheme) : 사용하는 프로토콜의 종류    <small>(예시) http, https, ftp, mailto </small>
- 호스트명(host) : 컴퓨터의 도메인명 or IP 주소
- 패스(path) : 서버 내의 경로 

|  스킴   |     호스트      |  패스  |
| :-----: | :-------------: | :----: |
| http:// | www.github.com/ | koo-ys |



### 정적 콘텐츠와 동적 콘텐츠

**정적 콘텐츠** 

- 미리 제작해서 서버에 보존
- 항상 동일하게 유지되면 좋은 것

**동적 콘텐츠** 

- 서버에 읽기 요청을 할 때마다 프로그램이 동작해서 만들어내는 콘텐츠
- 접속할 때마다 바뀌는 결과

 



# 2. Protocol 



### HTTP

Hypertext Transfer Protocol 

서버와 클라이언트가 Web 정보를 주고받기 위한 프로토콜

**HTTP의 특징** 

- 동작이 단순하다
- 정보 교환이 [ 클라이언트 요청 : 서버 응답 ]  = [ 1 : 1 ] 로 이루어진다
  - <small> 요청 한 번에 응답 한 번</small>
-  많은 경우 TCP와 조합하여 사용한다.
- 주로 서버가 HTTP 통신을 받을 포트 번호는 80번이나 이외의 포트도 가능하다 <small>(예시) http proxy</small>



##### 요청과 응답 (request & response)

**HTTP 요청**을 TCP/IP로 서버에 보내면 

서버는 요청 내용을 처리하고 **HTTP 응답**으로 보냄

- 요청(request)
  - [ 요청 대상 | 헤더 필드 | 메시지 본체 ] + 메서드
- 응답(response)
  - [ 상태 코드 | 헤더 필드 | 메시지 본체 ]



### HTTPS와 SSL/TLS

Hypertext Transfer Protocol **Secure**

HTTP 통신을 안전하게 보호하기 위한 구조

##### HTTPS의 특징

- 포트 번호가 443번으로 할당되어 있다
- HTTPS의 특정 프로토콜이 정해져 있지않고 **SSL/TLS** 프로토콜의 안전한 연결 방법을 사용한다
  - 그 때문에 HTTP가 가진 간단함이 그대로 반영
- HTTP의 요청 / 응답이 암호화
- 통신 내용이 조작되어있는지 검사 가능
- 접속하고 있는 Web 서버가 진짜인지 검증 가능



##### SSL/TLS 

Secure Sockets Layer / Transport Layer Security

여러 알고리즘 중에서 방식을 선택 (인증, 암호키 교환, 정보 암호화)

어떤 알고리즘을 선택할 지는 통신 초기 단계에서 결정 

**교섭(migration)** : 서버와 클라이언트가 서로 대화하여 공통으로 대응할 수 있는 알고리즘을 선택 



### SMTP

Simple Mail Transfer Protocol 

전자 메일 전송에 사용되는 프로토콜

요청과 응답이 일대일 대응이 아닌 연결하고 있는 동안 여러번의 요청과 응답을 교환한다

과거에 25번 포트 번호를 사용해왔으나  일본의 OP25B 정책으로 인해 587번 포트도 많이 사용한다

> OP25B : 스팸 메일 방지책으로 도입.
>
> ISP가 메일 서버 밖에 있는 경우 25번 포트로 접속할 수 없어 587 포트를 사용하게 되었다
>
> 587 포트(서브 미션 포트) : SMTP-AUTH(메일 송신 시, ID/PWD 요구)가 설정되어 메일 전송이 제한된다



### POP3와 IMAP4

Post Oice Protocol Version 3 & Internet Message Access Protocol Version 4

수신 받은 메일을 열람하는 프로토콜



- **POP3**
  - 메일함의 메일을 **PC**에 넣어 PC에서 메일 정리/열람
  - 네트워크의 연결이 끊기더라도 메일 열람 가능
  - 다른 기기와의 동기화 x
  - 주로 TCP와의 조합으로 110번 포트 번호 사용
    - +) SSL/TLS와 병용해서 암호화하는 POP3S
- **IMAP4** 
  - 메일을 서버상의 메일함에 그대로 둔 상태에서 메일 정리/열람
  - 네트워크 연결이 끊기면 메일 열람 불가
  - 메일을 보존하는 서버에 접속만 할 수 있다면 어떤 기기에서도 동일한 메일을 관리할 수 있다
  - 주로 TCP와의 조합으로 143번 포트 번호 사용



### FTP

File Transfer Protocol

파일을 전송하기 위한 프로토콜

몇 특징을 제외하면 HTTP도 동일한 역할이 가능하기 때문에 FTP의 기회가 줄어들고 있다.

**FTP의 특징**

- 일반적으로 TCP와 함께 사용하며 포트번호 2개를 할당한다
  - 전송 제어(명령) :  21번 포트
  - 데이터 전송 : 20번 포트
  - 두 개가 존재하는 이유?  제어하기 위한 접속이 분리되어 있으므로 컨트롤이 쉬워진다
- **패시브 모드**
  - 기존에 사용하던 액티브 모드는 보안적인 우려가 있어 패시브 모드를 고안
    1. 클라이언트가 21번 포트로 접속 요청을 하면 FTP 요청이 패시브 모드임을 알림
    2. 데이터 통로를 위해 새로운 포트를 임의로 할당, 선택한 포트번호를 클라이언트에게 전달
    3. 클라이언트는 출발치 포트를 선택한 후 서버가 임의 할당된 포트에 접속 요청
    4. 접속 허용 -> 파일 전송 
- 암호화에 대응
  - FTPS : FTP + SSL/TLS
  - SFTP : FTP + SSH



### SSH

Secure Shell

서버나 네트워크 기기에 접속해서 대상을  CUI로 조작하는데 사용하는 프로토콜 및 조작하기 위한 프로그램명

##### SSH의 특징

- TCP와 같이 사용하며 포트는 22번을 사용
- 교환시 암호화되어 있으므로 안전하게 대상 조작 가능
- 도청에 따른 정보 누출 방지 가능
- 조작 대상에 대한 안전한 방법으로 **공개 키 인증** 지원
  - **공개 키 인증**  
    - 미리 자신의 인증 정보를 포함한 공개 키와 비밀 키를 만들어두고 로그인한 대상에게 공개 키를 넣어둠
    - 대상이 로그인할 때 짝이 되는 비밀 키를 사용해서 로그인
    - <u>*일반적인 로그인과는 다르게(추측해서 일일이 맞춰볼 수 있음) 반드시 비밀키를 사용해 기계적인 방식으로 맞춰보기 때문에 안전우려 X*</u>  
    - 추가적으로 `비밀키` + `passphrase(긴 문자열 비밀번호) 설정`이면 보다 안전해짐 











#### 참고 블로그

[html 개념 참고](https://brunch.co.kr/@coveryou/14)

[DNS 개념 참고](https://samsikworld.tistory.com/489)








